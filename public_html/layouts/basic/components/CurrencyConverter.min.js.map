{"version":3,"file":"CurrencyConverter.min.js","sources":["CurrencyConverter.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nwindow.AppComponents_CurrencyConverter_Js = class {\n\t/**\n\t * Register change currency\n\t */\n\tregisterChangeCurrency() {\n\t\tthis.container.on('change', '.js-currencyc_list', (e) => {\n\t\t\tthis.container.find('.js-currency-rate').val(e.currentTarget.selectedOptions[0].dataset.currencyValue);\n\t\t\tthis.container.find('.js-currency-conv-rate').val(e.currentTarget.selectedOptions[0].dataset.conversionRate);\n\t\t\tthis.container.find('.js-currency-date').val(e.currentTarget.selectedOptions[0].dataset.conversionDate);\n\t\t\tthis.container\n\t\t\t\t.find('.js-currency-rate_text')\n\t\t\t\t.text(App.Fields.Double.formatToDisplay(e.currentTarget.selectedOptions[0].dataset.currencyValue, false));\n\t\t\tthis.container\n\t\t\t\t.find('.js-currency-date_text')\n\t\t\t\t.text(App.Fields.Date.dateToUserFormat(e.currentTarget.selectedOptions[0].dataset.conversionDate));\n\t\t\tthis.container.find('.js-currencyc_value').first().trigger('keyup');\n\t\t});\n\t\tthis.container.find('.js-currencyc_list').trigger('change');\n\t}\n\t/**\n\t * Register convert currency value\n\t */\n\tregisterConvert() {\n\t\tlet fields = this.container.find('.js-currencyc_value');\n\t\tfields.on('keyup focusout', (e) => {\n\t\t\tlet value = App.Fields.Double.formatToDb(e.currentTarget.value);\n\t\t\tlet currentCurrencyData = $(e.currentTarget).parent().find('.js-currencyc_list option:selected').data();\n\t\t\tfields.each((_n, ve) => {\n\t\t\t\tlet currencyData = $(ve).parent().find('.js-currencyc_list option:selected').data();\n\t\t\t\tif (currentCurrencyData.currencyId === currencyData.currencyId) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$(ve).val(\n\t\t\t\t\tApp.Fields.Double.formatToDisplay((value * currencyData.conversionRate) / currentCurrencyData.conversionRate),\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Register events\n\t */\n\tregisterEvents(container) {\n\t\tthis.container = container;\n\t\tthis.form = container.find('form');\n\t\tApp.Fields.Text.registerCopyClipboard(this.container);\n\t\tthis.registerConvert();\n\t\tthis.registerChangeCurrency();\n\t}\n};\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","i","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","res","call","Number","window","AppComponents_CurrencyConverter_Js","_class","value","registerChangeCurrency","_this","container","on","e","find","val","currentTarget","selectedOptions","dataset","currencyValue","conversionRate","conversionDate","text","App","Fields","Double","formatToDisplay","Date","dateToUserFormat","first","trigger","registerConvert","fields","formatToDb","currentCurrencyData","$","parent","data","each","_n","ve","currencyData","currencyId","registerEvents","form","Text","registerCopyClipboard"],"mappings":"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"}