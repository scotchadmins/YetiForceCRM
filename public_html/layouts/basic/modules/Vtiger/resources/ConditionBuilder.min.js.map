{"version":3,"file":"ConditionBuilder.min.js","sources":["ConditionBuilder.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass Vtiger_ConditionBuilder_Js {\n\t/**\n\t * Constructor\n\t * @param {jQuery} container\n\t * @param {(string|Object)} params\n\t * @param {function} onChange\n\t */\n\tconstructor(container, params, onChange) {\n\t\tthis.container = container;\n\t\tthis.params = typeof params === 'string' ? { sourceModuleName: params } : params;\n\t\tif (onChange) {\n\t\t\tthis.onChange = onChange;\n\t\t} else {\n\t\t\tthis.onChange = () => {};\n\t\t}\n\t}\n\n\t/**\n\t * Register change value event\n\t *\n\t * @param   {jQuery}  container\n\t */\n\tregisterChangeValueEvent(container) {\n\t\tcontainer.find('.js-condition-builder-value').on('change', (e) => {\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\t/**\n\t * Get default params\n\t * @returns {Object}\n\t */\n\tgetDefaultParams() {\n\t\treturn {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'ConditionBuilder',\n\t\t\t...this.params\n\t\t};\n\t}\n\n\t/**\n\t * Register events when change conditions\n\t * @param {jQuery} container\n\t */\n\tregisterChangeConditions(container) {\n\t\tlet self = this;\n\t\tcontainer.on('change', '.js-conditions-fields, .js-conditions-operator', (e) => {\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tlet requestParams = {};\n\t\t\tif (currentTarget.hasClass('js-conditions-fields')) {\n\t\t\t\trequestParams = {\n\t\t\t\t\tfieldname: currentTarget.val()\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\trequestParams = {\n\t\t\t\t\tfieldname: container.find('.js-conditions-fields').val(),\n\t\t\t\t\toperator: currentTarget.val()\n\t\t\t\t};\n\t\t\t}\n\t\t\tAppConnector.request({ ...requestParams, ...this.getDefaultParams() }).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tcontainer.html($(data).html());\n\t\t\t\tself.registerField(container);\n\t\t\t\tself.registerChangeValueEvent(container);\n\t\t\t\tself.onChange(self);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * register field types related events\n\t * @param {jQuery} container\n\t */\n\tregisterField(container) {\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('select.select2'));\n\t\tApp.Fields.Date.register(container, true, {}, 'js-date-field');\n\t\tApp.Fields.Date.registerRange(container.find('.js-date-range-field'), { ranges: false });\n\t\tApp.Fields.DateTime.register(container.find('.js-datetime-range-field'));\n\t\tapp.registerEventForClockPicker($(container.find('.clockPicker')));\n\t\tApp.Fields.Tree.register(container);\n\t}\n\n\t/**\n\t * Register events to add condition\n\t */\n\tregisterAddCondition() {\n\t\tlet self = this;\n\t\tthis.container.on('click', '.js-condition-add', (e) => {\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet container = $(e.currentTarget)\n\t\t\t\t.closest('.js-condition-builder-group-container')\n\t\t\t\t.find('> .js-condition-builder-conditions-container');\n\t\t\tAppConnector.request(this.getDefaultParams()).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tdata = $(data);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select.select2'));\n\t\t\t\tself.registerChangeConditions(data);\n\t\t\t\tself.registerChangeValueEvent(data);\n\t\t\t\tcontainer.append(data);\n\t\t\t\tself.onChange(self);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Register events to add group\n\t */\n\tregisterAddGroup() {\n\t\tthis.container.on('click', '.js-group-add', (e) => {\n\t\t\tlet template = this.container.find('.js-condition-builder-group-template').clone();\n\t\t\ttemplate.removeClass('hide');\n\t\t\t$(e.target)\n\t\t\t\t.closest('.js-condition-builder-group-container')\n\t\t\t\t.find('> .js-condition-builder-conditions-container')\n\t\t\t\t.append(template.html());\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\n\t/**\n\t * Register events to remove group\n\t */\n\tregisterDeleteGroup() {\n\t\tthis.container.on('click', '.js-group-delete', (e) => {\n\t\t\t$(e.target).closest('.js-condition-builder-group-container').remove();\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\n\t/**\n\t * Register events to remove condition\n\t */\n\tregisterDeleteCondition() {\n\t\tthis.container.on('click', '.js-condition-delete', (e) => {\n\t\t\t$(e.target).closest('.js-condition-builder-conditions-row').remove();\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\n\t/**\n\t * Block submit on press enter key\n\t */\n\tregisterDisableSubmitOnEnter() {\n\t\tthis.container.find('.js-condition-builder-value').on('keydown', (e) => {\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Read conditions in group\n\t * @param {jQuery} container\n\t * @param {boolean} skipEmpty\n\t * @returns {object}\n\t */\n\treadCondition(container, skipEmpty) {\n\t\tlet self = this;\n\t\tlet condition = container.find('> .js-condition-switch .js-condition-switch-value').hasClass('active')\n\t\t\t? 'AND'\n\t\t\t: 'OR';\n\t\tlet arr = {};\n\t\tlet rules = [];\n\t\tcontainer.find('> .js-condition-builder-conditions-container >').each(function () {\n\t\t\tlet element = $(this);\n\t\t\tif (element.hasClass('js-condition-builder-conditions-row')) {\n\t\t\t\trules.push({\n\t\t\t\t\tfieldname: element.find('.js-conditions-fields').val(),\n\t\t\t\t\toperator: element.find('.js-conditions-operator').val(),\n\t\t\t\t\tvalue: element.find('.js-condition-builder-value').val()\n\t\t\t\t});\n\t\t\t} else if (element.hasClass('js-condition-builder-group-container')) {\n\t\t\t\tlet childRules = self.readCondition(element, skipEmpty);\n\t\t\t\tif (!skipEmpty || Object.keys(childRules).length) {\n\t\t\t\t\trules.push(childRules);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (!skipEmpty || rules.length) {\n\t\t\tarr['condition'] = condition;\n\t\t\tarr['rules'] = rules;\n\t\t}\n\t\treturn arr;\n\t}\n\n\t/**\n\t * Returns conditions\n\t * @param {boolean} skipEmpty\n\t * @returns {object}\n\t */\n\tgetConditions(skipEmpty = true) {\n\t\treturn this.readCondition(this.container.find('> .js-condition-builder-group-container'), skipEmpty);\n\t}\n\n\t/**\n\t * Main function to regsiter events\n\t */\n\tregisterEvents() {\n\t\tlet self = this;\n\t\tthis.registerAddCondition();\n\t\tthis.registerAddGroup();\n\t\tthis.registerDeleteGroup();\n\t\tthis.registerDeleteCondition();\n\t\tthis.registerDisableSubmitOnEnter();\n\t\tthis.container.find('.js-condition-builder-conditions-row').each(function () {\n\t\t\tlet row = $(this);\n\t\t\tself.registerChangeConditions(row);\n\t\t\tself.registerChangeValueEvent(row);\n\t\t\tself.registerField(row);\n\t\t});\n\t}\n}\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","source","i","arguments","length","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","res","call","Number","Vtiger_ConditionBuilder_Js","container","params","onChange","sourceModuleName","registerChangeValueEvent","_this","find","on","getDefaultParams","module","app","getModuleName","parent","getParentModuleName","view","registerChangeConditions","_this2","self","e","progress","$","progressIndicator","position","blockInfo","enabled","currentTarget","requestParams","hasClass","fieldname","val","operator","AppConnector","request","done","data","mode","html","registerField","App","Fields","Picklist","showSelect2ElementView","Date","register","registerRange","ranges","DateTime","registerEventForClockPicker","Tree","registerAddCondition","_this3","closest","append","registerAddGroup","_this4","template","clone","removeClass","registerDeleteGroup","_this5","remove","registerDeleteCondition","_this6","registerDisableSubmitOnEnter","preventDefault","readCondition","skipEmpty","condition","arr","rules","each","element","childRules","getConditions","registerEvents","row"],"mappings":"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"}