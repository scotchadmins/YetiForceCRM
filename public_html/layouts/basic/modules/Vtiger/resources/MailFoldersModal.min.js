'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return {s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return {s:function s(){it=it.call(o);},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2;},f:function f(){try{normalCompletion||null==it.return||it.return();}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return "Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}$.Class("Base_MailFoldersModal_JS",{},{/**
		 * Event for select row
		 */selectEvent:!1,/**
		 * Modal container
		 */container:!1,/**
		 * Jstree element
		 */tree:!1,/**
		 * Multiple selection
		 */multiple:!1,/**
		 * Set event for select row
		 * @param {function} cb
		 */setSelectEvent:function setSelectEvent(cb){this.selectEvent=cb;},/**
		 * Generate tree
		 */generateTree:function generateTree(){var plugins=[];this.multiple&&(plugins.push("category"),plugins.push("checkbox")),plugins.push("search"),this.tree.jstree($.extend(!0,{core:{data:JSON.parse(this.container.find(".js-tree-value").val()),themes:{name:"proton",responsive:!0}},checkbox:{three_state:!1},plugins:plugins},this.tree.data("params")));},/**
		 * Register select events
		 */registerSelectEvent:function registerSelectEvent(){var _this=this;this.multiple?this.container.find("[name=\"saveButton\"]").on("click",function(){var _step,id=[],name=[],_iterator=_createForOfIteratorHelper(_this.tree.jstree("get_selected",!0));try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;id.push(value.id),console.log(value),name.push(value.id);}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.selectEvent({id:JSON.stringify(id),name:name.join(", ")}),app.hideModalWindow(!1,_this.container.parent().attr("id"));}):this.tree.on("select_node.jstree",function(event,data){_this.selectEvent({id:data.node.id,name:data.node.text}),app.hideModalWindow(!1,_this.container.parent().attr("id"));});},registerSearchEvent:function registerSearchEvent(){var thisInstance=this,valueSearch=this.container.find("#valueSearchTree");valueSearch.on("keypress",function(e){13==e.which&&thisInstance.searchingInTree(valueSearch.val());}),this.container.find("#btnSearchTree").on("click",function(){thisInstance.searchingInTree(valueSearch.val());});},searchingInTree:function searchingInTree(text){this.tree.jstree(!0).search(text);},/**
		 * Register base events
		 * @param {jQuery} modalContainer
		 */registerEvents:function registerEvents(modalContainer){this.container=modalContainer,this.tree=this.container.find(".js-tree-contents"),this.multiple=!(1!=this.container.find(".js-multiple").val()),this.generateTree(),this.registerSearchEvent(),this.registerSelectEvent();}});
//# sourceMappingURL=MailFoldersModal.min.js.map
