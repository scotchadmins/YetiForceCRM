{"version":3,"file":"MailFoldersModal.min.js","sources":["MailFoldersModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_MailFoldersModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Jstree element\n\t\t */\n\t\ttree: false,\n\t\t/**\n\t\t * Multiple selection\n\t\t */\n\t\tmultiple: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function (cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Generate tree\n\t\t */\n\t\tgenerateTree: function () {\n\t\t\tlet plugins = [];\n\t\t\tif (this.multiple) {\n\t\t\t\tplugins.push('category');\n\t\t\t\tplugins.push('checkbox');\n\t\t\t}\n\t\t\tplugins.push('search');\n\t\t\tthis.tree.jstree(\n\t\t\t\t$.extend(\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: plugins\n\t\t\t\t\t},\n\t\t\t\t\tthis.tree.data('params')\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Register select events\n\t\t */\n\t\tregisterSelectEvent: function () {\n\t\t\tif (this.multiple) {\n\t\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\tlet id = [],\n\t\t\t\t\t\tname = [];\n\t\t\t\t\tfor (let value of this.tree.jstree('get_selected', true)) {\n\t\t\t\t\t\tid.push(value.id);\n\t\t\t\t\t\tconsole.log(value);\n\t\t\t\t\t\tname.push(value.id);\n\t\t\t\t\t}\n\t\t\t\t\tthis.selectEvent({ id: JSON.stringify(id), name: name.join(', ') });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\t\tthis.selectEvent({ id: data.node.id, name: data.node.text });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSearchEvent: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\t\tvalueSearch.on('keypress', function (e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('#btnSearchTree').on('click', function () {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t});\n\t\t},\n\t\tsearchingInTree: function (text) {\n\t\t\tthis.tree.jstree(true).search(text);\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\t\tthis.generateTree();\n\t\t\tthis.registerSearchEvent();\n\t\t\tthis.registerSelectEvent();\n\t\t}\n\t}\n);\n"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","$","Class","selectEvent","container","tree","multiple","setSelectEvent","cb","generateTree","plugins","push","jstree","extend","core","data","JSON","parse","find","val","themes","responsive","checkbox","three_state","registerSelectEvent","_this","on","_step","id","_iterator","console","log","stringify","join","app","hideModalWindow","parent","attr","event","node","text","registerSearchEvent","thisInstance","valueSearch","which","searchingInTree","search","registerEvents","modalContainer"],"mappings":"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"}