{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Companies_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Register events for form checkbox element\n\t\t */\n\t\tregisterNewsletter() {\n\t\t\tconst form = $('[name=\"EditCompanies\"]');\n\t\t\tform.find('[id$=\"newsletter\"]').on('click', (e) => {\n\t\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"email\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\t\tinputsContainer.find('[id$=\"email\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterSubmitForm: function () {\n\t\t\tvar form = this.getForm();\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\t\tvar formData = new FormData(form[0]);\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\turl: 'index.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\tprocessData: false,\n\t\t\t\t\t\tcontentType: false\n\t\t\t\t\t};\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (true == data.result.success) {\n\t\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message, type: 'error' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar form = this.getForm();\n\t\t\tif (form.length) {\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tform.find('[data-inputmask]').inputmask();\n\t\t\t}\n\t\t\tthis.registerSubmitForm();\n\t\t\tthis.registerNewsletter();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","registerNewsletter","form","$","find","on","e","inputsContainer","target","closest","prop","attr","removeClass","removeAttr","val","addClass","registerSubmitForm","getForm","preventDefault","validationEngine","app","removeEmptyFilesInput","formData","FormData","progressIndicatorElement","jQuery","progressIndicator","blockInfo","enabled","AppConnector","request","url","type","data","processData","contentType","done","mode","result","success","window","location","href","Settings_Vtiger_Index_Js","showMessage","text","message","formAlignmentAfterValidation","registerEvents","length","validationEngineOptions","inputmask"],"mappings":"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"}