{"version":3,"file":"ListTable.min.js","sources":["ListTable.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Groups_ListTable_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Register DataTable\n\t\t */\n\t\tregisterDataTable: function () {\n\t\t\tlet table = this.contentContainer.find('.js-data-table');\n\t\t\tlet form = this.contentContainer.find('.js-filter-form');\n\t\t\tlet dataTable = app.registerDataTables(table, {\n\t\t\t\torder: [],\n\t\t\t\tcolumnDefs: [\n\t\t\t\t\t{ targets: -1, orderable: false },\n\t\t\t\t\t{ className: 'align-middle', targets: '_all' }\n\t\t\t\t],\n\t\t\t\tprocessing: true,\n\t\t\t\tserverSide: true,\n\t\t\t\tsearching: false,\n\t\t\t\torderCellsTop: true,\n\t\t\t\tfixedHeader: true,\n\t\t\t\tdom: \"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'p>>\" + \"<'row'<'col-sm-12'tr>>\",\n\t\t\t\tajax: {\n\t\t\t\t\turl: table.data('url'),\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: function (data) {\n\t\t\t\t\t\t$.extend(data, form.serializeFormData());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tinitComplete: function () {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('select.select2,select.select2noactive'));\n\t\t\t\t}\n\t\t\t});\n\t\t\ttable.find('thead input,thead select').each(function (i) {\n\t\t\t\t$(this).on('change', function () {\n\t\t\t\t\tdataTable.column(i).search(this.value).draw();\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.on('click', 'tr', function (e) {\n\t\t\t\tif ($(e.target).hasClass('js-no-link')) return;\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tif (element.find('.js-detail-button').length) {\n\t\t\t\t\tlet recordUrl = element.find('.js-detail-button').data('recordurl');\n\t\t\t\t\twindow.location.href = recordUrl;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load tab content\n\t\t */\n\t\tloadTabContent: function () {\n\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'ListTable'\n\t\t\t})\n\t\t\t\t.done((data) => {\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tthis.contentContainer.html(data);\n\t\t\t\t\tthis.registerDataTable();\n\t\t\t\t\tapp.registerFormsEvents(this.contentContainer);\n\t\t\t\t})\n\t\t\t\t.fail((_) => {\n\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents: function (e) {\n\t\t\tthis.contentContainer = $('.contentsDiv');\n\t\t\tthis.loadTabContent();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerDataTable","table","contentContainer","find","form","dataTable","app","registerDataTables","order","columnDefs","targets","orderable","className","processing","serverSide","searching","orderCellsTop","fixedHeader","dom","ajax","url","data","type","$","extend","serializeFormData","initComplete","App","Fields","Picklist","showSelect2ElementView","each","i","on","column","search","value","draw","e","target","hasClass","element","currentTarget","length","recordUrl","window","location","href","loadTabContent","_this","progress","progressIndicator","AppConnector","request","module","getModuleName","parent","getParentModuleName","view","done","mode","html","registerFormsEvents","fail","showNotify","text","vtranslate","registerEvents"],"mappings":"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"}